schema: '2.0'
stages:
  preprocess:
    cmd: python -m DLBDSMTP01.src.preprocess DLBDSMTP01/data/external/modified_fraud_data.csv
      - DLBDSMTP01/src/preprocess.py - DLBDSMTP01/data/external/modified_fraud_data.csv
    outs:
    - path: DLBDSMTP01/data/processed/processed_cash_in_data.csv
      hash: md5
      md5: 231c82a6804ee5e01462b2df5e2322e7
      size: 5335031
    - path: DLBDSMTP01/data/processed/processed_cash_out_data.csv
      hash: md5
      md5: 6452a244287a0c77e0231727bf1b01de
      size: 7177973
    - path: DLBDSMTP01/data/processed/processed_debit_data.csv
      hash: md5
      md5: e2ef571b6b9b0626768288aacb505d86
      size: 151040
    - path: DLBDSMTP01/data/processed/processed_payment_data.csv
      hash: md5
      md5: c3ca950df8910dd0617e87f70c0e3f3d
      size: 5421610
    - path: DLBDSMTP01/data/processed/processed_transfer_data.csv
      hash: md5
      md5: 5ab29204ccb7a04514428aebf5efba16
      size: 1652787
  analyze_processed_cash_out:
    cmd: python DLBDSMTP01/src/analyze_processed.py DLBDSMTP01/data/processed/processed_cash_out_data.csv
    deps:
    - path: DLBDSMTP01/data/processed/processed_cash_out_data.csv
      hash: md5
      md5: 6452a244287a0c77e0231727bf1b01de
      size: 7177973
    - path: DLBDSMTP01/src/analyze_processed.py
      hash: md5
      md5: 9ab328254aeb40919ae3d966b48c923b
      size: 2450
    outs:
    - path: plots/cash_pca.png
      hash: md5
      md5: d526ec212959aca4a1eb4f796bd09a53
      size: 50195
  analyze_processed_transfer:
    cmd: python DLBDSMTP01/src/analyze_processed.py DLBDSMTP01/data/processed/processed_transfer_data.csv
    deps:
    - path: DLBDSMTP01/data/processed/processed_transfer_data.csv
      hash: md5
      md5: 5ab29204ccb7a04514428aebf5efba16
      size: 1652787
    - path: DLBDSMTP01/src/analyze_processed.py
      hash: md5
      md5: 9ab328254aeb40919ae3d966b48c923b
      size: 2450
    outs:
    - path: plots/transfer_pca.png
      hash: md5
      md5: 58af42d3b7c4d659ab83b35b4dc9fe01
      size: 35682
  train_cash_out:
    cmd: python DLBDSMTP01/src/train_model.py --data_filename DLBDSMTP01/data/processed/processed_cash_out_data.csv
    deps:
    - path: DLBDSMTP01/data/processed/processed_cash_out_data.csv
      hash: md5
      md5: cdfd631e0816e03d94301162a9e7e3a9
      size: 7165359
    - path: DLBDSMTP01/src/train_model.py
      hash: md5
      md5: 57e12ab94601ea37d3a16f98640016c4
      size: 6297
    params:
      params.yaml:
        train.max_iters: 500
    outs:
    - path: metrics/train_metrics_processed_cash_out_data.json
      hash: md5
      md5: ce2b675a1ea871f2c0012ed4a2a88a53
      size: 110
    - path: models/best_lr_processed_cash_out_data.pkl
      hash: md5
      md5: 934868c0ffe7262b1b82bb8d2f32bb24
      size: 791
  train_transfer:
    cmd: python DLBDSMTP01/src/train_model.py --data_filename DLBDSMTP01/data/processed/processed_transfer_data.csv
    deps:
    - path: DLBDSMTP01/data/processed/processed_transfer_data.csv
      hash: md5
      md5: 36abb5cd6bc9d18b48d5037a167bcd0c
      size: 1650069
    - path: DLBDSMTP01/src/train_model.py
      hash: md5
      md5: 57e12ab94601ea37d3a16f98640016c4
      size: 6297
    params:
      params.yaml:
        train.max_iters: 500
    outs:
    - path: metrics/train_metrics_processed_transfer_data.json
      hash: md5
      md5: 148f13293413d6fb1a3ac211fb9fd998
      size: 109
    - path: models/best_lr_processed_transfer_data.pkl
      hash: md5
      md5: 5d8399d216ca507fcce9abd77da77081
      size: 791
  select_best_model_cash_out:
    cmd: python DLBDSMTP01/src/production_model_selection.py --experiment_name FraudDetectionModel
      --metric_name val_f1_score --registered_model_name BestLRModel_processed_cash_out_data
      --local_model_path models/final_best_lr_processed_cash_out_data.pkl
    deps:
    - path: DLBDSMTP01/src/production_model_selection.py
      hash: md5
      md5: 1ca7439944dae8fe6a2dff5edce9b3de
      size: 2986
    - path: metrics/train_metrics_processed_cash_out_data.json
      hash: md5
      md5: ce2b675a1ea871f2c0012ed4a2a88a53
      size: 110
    outs:
    - path: models/final_best_lr_processed_cash_out_data.pkl
      hash: md5
      md5: 28e4139d047a3a94098c6722df1a2c22
      size: 1752
  select_best_model_transfer:
    cmd: python DLBDSMTP01/src/production_model_selection.py --experiment_name FraudDetectionModel
      --metric_name val_f1_score --registered_model_name BestLRModel_processed_transfer_data
      --local_model_path models/final_best_lr_processed_transfer_data.pkl
    deps:
    - path: DLBDSMTP01/src/production_model_selection.py
      hash: md5
      md5: 1ca7439944dae8fe6a2dff5edce9b3de
      size: 2986
    - path: metrics/train_metrics_processed_transfer_data.json
      hash: md5
      md5: 148f13293413d6fb1a3ac211fb9fd998
      size: 109
    outs:
    - path: models/final_best_lr_processed_transfer_data.pkl
      hash: md5
      md5: 28e4139d047a3a94098c6722df1a2c22
      size: 1752
