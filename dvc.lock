schema: '2.0'
stages:
  preprocess:
    cmd: python -m DLBDSMTP01.src.preprocess DLBDSMTP01/data/external/modified_fraud_data.csv
      - DLBDSMTP01/src/preprocess.py - DLBDSMTP01/data/external/modified_fraud_data.csv
    outs:
    - path: DLBDSMTP01/data/processed/processed_cash_in_data.csv
      hash: md5
      md5: 231c82a6804ee5e01462b2df5e2322e7
      size: 5335031
    - path: DLBDSMTP01/data/processed/processed_cash_out_data.csv
      hash: md5
      md5: 6452a244287a0c77e0231727bf1b01de
      size: 7177973
    - path: DLBDSMTP01/data/processed/processed_debit_data.csv
      hash: md5
      md5: e2ef571b6b9b0626768288aacb505d86
      size: 151040
    - path: DLBDSMTP01/data/processed/processed_payment_data.csv
      hash: md5
      md5: c3ca950df8910dd0617e87f70c0e3f3d
      size: 5421610
    - path: DLBDSMTP01/data/processed/processed_transfer_data.csv
      hash: md5
      md5: 5ab29204ccb7a04514428aebf5efba16
      size: 1652787
  analyze_processed_cash_out:
    cmd: python DLBDSMTP01/src/analyze_processed.py DLBDSMTP01/data/processed/processed_cash_out_data.csv
    deps:
    - path: DLBDSMTP01/data/processed/processed_cash_out_data.csv
      hash: md5
      md5: 6452a244287a0c77e0231727bf1b01de
      size: 7177973
    - path: DLBDSMTP01/src/analyze_processed.py
      hash: md5
      md5: 9ab328254aeb40919ae3d966b48c923b
      size: 2450
    outs:
    - path: plots/cash_pca.png
      hash: md5
      md5: d526ec212959aca4a1eb4f796bd09a53
      size: 50195
  analyze_processed_transfer:
    cmd: python DLBDSMTP01/src/analyze_processed.py DLBDSMTP01/data/processed/processed_transfer_data.csv
    deps:
    - path: DLBDSMTP01/data/processed/processed_transfer_data.csv
      hash: md5
      md5: 5ab29204ccb7a04514428aebf5efba16
      size: 1652787
    - path: DLBDSMTP01/src/analyze_processed.py
      hash: md5
      md5: 9ab328254aeb40919ae3d966b48c923b
      size: 2450
    outs:
    - path: plots/transfer_pca.png
      hash: md5
      md5: 58af42d3b7c4d659ab83b35b4dc9fe01
      size: 35682
  train_cash_out:
    cmd: python DLBDSMTP01/src/train_model.py --data_filename DLBDSMTP01/data/processed/processed_cash_out_data.csv
    deps:
    - path: DLBDSMTP01/data/processed/processed_cash_out_data.csv
      hash: md5
      md5: 6452a244287a0c77e0231727bf1b01de
      size: 7177973
    - path: DLBDSMTP01/src/train_model.py
      hash: md5
      md5: c643a92d240e451d97f79df4fd7729fe
      size: 6379
    params:
      params.yaml:
        train.max_iters: 500
    outs:
    - path: metrics/train_metrics_processed_cash_out_data.json
      hash: md5
      md5: ce2b675a1ea871f2c0012ed4a2a88a53
      size: 110
    - path: models/best_lr_processed_cash_out_data.pkl
      hash: md5
      md5: 490d99395d44f0a16c161c72f0a267b9
      size: 791
  train_transfer:
    cmd: python DLBDSMTP01/src/train_model.py --data_filename DLBDSMTP01/data/processed/processed_transfer_data.csv
    deps:
    - path: DLBDSMTP01/data/processed/processed_transfer_data.csv
      hash: md5
      md5: 5ab29204ccb7a04514428aebf5efba16
      size: 1652787
    - path: DLBDSMTP01/src/train_model.py
      hash: md5
      md5: c643a92d240e451d97f79df4fd7729fe
      size: 6379
    params:
      params.yaml:
        train.max_iters: 500
    outs:
    - path: metrics/train_metrics_processed_transfer_data.json
      hash: md5
      md5: 148f13293413d6fb1a3ac211fb9fd998
      size: 109
    - path: models/best_lr_processed_transfer_data.pkl
      hash: md5
      md5: deb7f3d8c0c4987017376d17b02f2918
      size: 791
  select_best_model_cash_out:
    cmd: python DLBDSMTP01/src/production_model_selection.py --experiment_name FraudDetectionModel
      --metric_name val_f1_score --registered_model_name BestLRModel_processed_cash_out_data
      --local_model_path models/final_best_lr_processed_cash_out_data.pkl
    deps:
    - path: DLBDSMTP01/src/production_model_selection.py
      hash: md5
      md5: e74cb0d06838cc11cd6113c55d82267a
      size: 3190
    - path: metrics/train_metrics_processed_cash_out_data.json
      hash: md5
      md5: ce2b675a1ea871f2c0012ed4a2a88a53
      size: 110
    outs:
    - path: models/final_best_lr_processed_cash_out_data.pkl
      hash: md5
      md5: 26997ef2e3d5bfdb987fc4b252cf7b19
      size: 1752
  select_best_model_transfer:
    cmd: python DLBDSMTP01/src/production_model_selection.py --experiment_name FraudDetectionModel
      --metric_name val_f1_score --registered_model_name BestLRModel_processed_transfer_data
      --local_model_path models/final_best_lr_processed_transfer_data.pkl
    deps:
    - path: DLBDSMTP01/src/production_model_selection.py
      hash: md5
      md5: e74cb0d06838cc11cd6113c55d82267a
      size: 3190
    - path: metrics/train_metrics_processed_transfer_data.json
      hash: md5
      md5: 148f13293413d6fb1a3ac211fb9fd998
      size: 109
    outs:
    - path: models/final_best_lr_processed_transfer_data.pkl
      hash: md5
      md5: 26997ef2e3d5bfdb987fc4b252cf7b19
      size: 1752
